# 前端 React 单元测试

## 前言

长期以来，前端开发的单元测试并不是在前端的开发过程中所必须的，也不是每个前端开发工程师所注意和重视的，
甚至扩大到软件开发过程中单元测试这一环也不是在章程上有书面规定所要求的。曾经的我也问过许多次自己以及身边的前端工程师。
为什么前端要写单元测试？前端的单元测试和测试工程师的测试有什么区别？在开发过程中，花费大量时间（甚至可能大于 50%）的之间去写单元测试值不值得？
这个问题我们后面再来回答

## 准备: 前端环境

常见环境部署方法，基本都是在 nodejs 官网下载 exe，msi 文件双击安装后直接可用。
nodejs 是一门更新很快的语言，我们常常要维护老项目，老项目依赖某个较早的 nodejs 版本，随便升级会生成莫名其妙的错误。
而 nodejs 的生态环境是总在不断向前推进的，很多工具，第三方包都在前进，舍弃旧环境。
很多时候如果环境不升级，我们需要手动安装很多老版本工具，而且连文档都查阅都会混乱，我们程序员也有需要保持最新的知识栈的需求。
此处推荐使用编程语言版本切换工具 🍀，nodejs 的就是[nvm](https://github.com/creationix/nvm)，
全称 Node Version Manager，官网有多系统安装方式。

## 第一部分: 函数式单元测试

说起单元测试，市面上的单元测试工具形形色色，五花八门。最常使用的工具为:Jest Mocha Jasmine

- 🛠 工具[Jest](https://www.npmjs.com/package/eslint)
  安装

  ```bash
  yarn add jest
  ```

  - facebook 坐庄
  - 基于 Jasmine 至今已经做了大量修改添加了很多特性
  - 开箱即用配置少，API 简单
  - 支持断言和仿真
  - 支持快照测试
  - 在隔离环境下测试
  - 互动模式选择要测试的模块
  - 优雅的测试覆盖率报告，基于 Istanbul
  - 智能并行测试(参考)
  - 较新，社区不十分成熟
  - 全局环境，比如 describe 不需要引入直接用
  - 较多用于 React 项目(但广泛支持各种项目)

- 🛠 工具[Mocha](https://mochajs.org/)
  安装

  ```bash
  yarn add mocha
  ```

  - 灵活(不包括断言和仿真，自己选对应工具)
  - 流行的选择：chai，sinon
  - 社区成熟用的人多，测试各种东西社区都有示例
  - 需要较多配置
  - 可以使用快照测试，但依然需要额外配置
