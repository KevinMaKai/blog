# mobx 分享

昨天面试某大厂，被问到 mobx 的原理以及如果让你来实现一个 mobx 你会怎么做，说句实话，平时都是拿来使用，并没有深究其原理，回答的模棱两可，被面试官追问细节，当场垮掉。晚上到家总结面试，总结自己的失败经历。总结出以下两点：

- 遇到不会的问题不要慌张。尽量以自己会的方向引导，如果实在一点都不会，尽早跟面试官坦白（我就是有点不懂装懂，被面试官追问的很惨）
- 简历上面写的所有技术点必须深知其实用方法及内部原理，虽不要求全部看过源码，至少能达到面试官问你内部实现方式能回答出来的程度

下面就面试官问到的有关 mobx 的问题进行分享，以及自我学习：

## 你们为什么选择了 mobx，没有选择 redux？

我是这么回答的：部门最开始的架构选择的是 mobx，为了方便非前端开发者上手开发前端项目。部门需要测试的同学上手来开发前端项目。

面试官呵呵一笑。

回家想了想，其实我只回答了 mobx 一个小小的优势：状态管理方法简单，这显然是远远不够的，而且会让面试官对你的回答失望，仅仅是因为部门同事上手简单，就草草的选择了架构的方向。。

如果在遇到相关的问题，可以从以下几个方面着手回答并进行延伸：

1. mobx 与 redux 的优势和劣势对比。
2. mobx 的劣势我在项目中是怎么去解决和避免的。
3. 我使用 mobx 有什么心得

首先来看 mobx 和 redux 的优劣势对比：

### 优势

1. 学习成本少：Mobx 基础知识很简单，学习了半小时官方文档和示例代码就搭建了新项目实例；而 Redux 确较繁琐，流程较多，需要配置，创建 store，编写 reducer，action，如果涉及异步任务，还需要引入 redux-thunk 或 redux-saga 编写额外代码，Mobx 流程相比就简单很多，并且不需要额外异步处理库；
2. 面向对象编程：Mobx 支持面向对象编程，我们可以使用@observable and @observer，以面向对象编程方式使得 JavaScript 对象具有响应式能力；而 Redux 最推荐遵循函数式编程，当然 Mobx 也支持函数式编程；
3. 模版代码少：相对于 Redux 的各种模版代码，如，actionCreater，reducer，saga／thunk 等，Mobx 则不需要编写这类模板代码；

### 劣势

1. 过于自由：Mobx 提供的约定及模版代码很少，这导致开发代码编写很自由，如果不做一些约定，比较容易导致团队代码风格不统一，所以当团队成员较多时，确实需要添加一些约定；
2. 可拓展，可维护性：也许你会担心 Mobx 能不能适应后期项目发展壮大呢？确实 Mobx 更适合用在中小型项目中，但这并不表示其不能支撑大型项目，关键在于大型项目通常需要特别注意可拓展性，可维护性，相比而言，规范的 Redux 更有优势，而 Mobx 更自由，需要我们自己制定一些规则来确保项目后期拓展，维护难易程度；

下面我们来看看我再项目中是怎么避免以上劣势的：

mobx 的劣势主要存在 2 个方面：1.代码过于自由，不好设定规范。 2.不确定是否能胜任大型项目

代码设定规范：首先我们要利用 mobx 内部的 configure 来规定必须通过 action 来修改数据状态

```javascript
import { configure } from "mobx";
configure({ enforceActions: "observed" });
```

## mobx 内部核心是什么？

## 简单来实现一个 mobx
